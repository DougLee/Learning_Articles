# Mongodb3.6 集群搭建

三种方式: Replica Set / Sharding / Master-Slave





![mongodb cluster](images/mongodb1.png)

四个组件:

* mongos
* config server
* shard
* replica set





mongodb配置模板

```
systemLog:
  destination: file
  logAppend: true
  logRotate: rename
  path: $mymongo/logs/mongod.log
  timeStampFormat: iso8601-local
  traceAllExceptions: false
  verbosity: 0
processManagement:
  fork: true
  pidFilePath: $mymongo/logs/mongod.pid
net:    
  #bindIp: 127.0.0.1
  port: 3001
  http:
    enabled: false
  maxIncomingConnections: 1000
  unixDomainSocket:
    enabled: false
operationProfiling:
  mode: slowOp
  slowOpThresholdMs: 100    
security:
  authorization: enabled
  keyFile: $mymongo/etc/keyfile
  javascriptEnabled: false
replication:
  oplogSizeMB: 5120
  replSetName: myreplset
storage:
  dbPath: $mymongo/data
  directoryPerDB: true
  syncPeriodSecs: 60
  engine: wiredTiger
  journal:
    enabled: true
    commitIntervalMs: 100
  wiredTiger:
    engineConfig:
      cacheSizeGB: 4
```







